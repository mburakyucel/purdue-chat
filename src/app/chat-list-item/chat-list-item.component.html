<button
  *ngIf="chatMetadata"
  mat-list-item
  class="h-auto my-2"
  (click)="onClick()"
>
  <div class="container">
    <div class="row">
      <div class="col-auto p-0">
        <img
          class="rounded-circle"
          height="56px"
          [src]="imageUrl"
          *ngIf="imageUrl"
        />
      </div>
      <div class="col">
        <div>
          <span *ngIf="chatTitle">{{ chatTitle }}</span>
          <span *ngIf="lastMessage" style="float: right">{{
            lastMessage.createdAt | date: "shortTime"
          }}</span>
        </div>
        <p
          *ngIf="lastMessage && users[lastMessage.uid]"
          class="pt-2 d-inline text-muted"
        >
          {{ users[lastMessage.uid].displayName }}:
          <ng-container *ngIf="lastMessage.type == 'text'">{{
            lastMessage.message
          }}</ng-container>
          <ng-container *ngIf="lastMessage.type == 'image'"
            >shared an image</ng-container
          >
        </p>
        <p *ngIf="unreadCount" style="float: right;">
          <span class="badge bg-primary">{{unreadLabel}}</span>
        </p>
      </div>
    </div>
  </div>
</button>
